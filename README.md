## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
CS_upcoming_matches_bot/
โ
โโโ bot/                         # ะัะฝะพะฒะฝะพะน ะบะพะด ะฑะพัะฐ
โ   โโโ __init__.py
โ   โโโ bot.py                   # Telegram-ะฑะพั: ะบะพะผะฐะฝะดั, ะปะพะณะธะบะฐ ะฒะทะฐะธะผะพะดะตะนััะฒะธั
โ   โโโ db.py                    # ะะฐะฑะพัะฐ ั SQLite-ะฑะฐะทะพะน (ะฟะพะดะฟะธััะธะบะธ, ัะฒะตะดะพะผะปะตะฝะธั)
โ   โโโ notifications.py         # ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ะฑะปะธะถะฐะนัะธั ะผะฐััะฐั
โ
โโโ cache/
โ   โโโ matches.json             # ะัั ั ะดะฐะฝะฝัะผะธ ะผะฐััะตะน ะธ ัััะฝะธัะพะฒ
โ
โโโ data/
โ   โโโ subscribers.db           # SQLite-ะฑะฐะทะฐ ะฟะพะดะฟะธััะธะบะพะฒ
โ
โโโ logs/                        # ะะพะณะธ ะฒัะตั ะฟัะพัะตััะพะฒ
โ   โโโ bot.log
โ   โโโ db.log
โ   โโโ errors.log
โ   โโโ matches.log
โ   โโโ notifications.log
โ   โโโ *.stdout.log / *.stderr.log
โ
โโโ tests/
โ   โโโ test_notifications.py    # Pytest-ัะตััั
โ
โโโ utils/                       # ะฃัะธะปะธัั ะธ ะฒัะฟะพะผะพะณะฐัะตะปัะฝัะต ัะบัะธะฟัั
โ   โโโ cache_writer.py
โ   โโโ cleanup_db.py
โ   โโโ cleanup_loop.sh
โ   โโโ form_match_card.py       # ะคะพัะผะธัะพะฒะฐะฝะธะต ัะตะบััะฐ ะธ ะบะปะฐะฒะธะฐัััั ะผะฐััะฐ
โ   โโโ logging_config.py
โ   โโโ match_cacher.py          # ะคะพะฝะพะฒะฐั ะทะฐะณััะทะบะฐ ะผะฐััะตะน ะฒ ะบัั
โ   โโโ matches_cache_reader.py  # ะงัะตะฝะธะต ะผะฐััะตะน ะธะท ะบััะฐ
โ   โโโ pandascore.py            # ะะฐะฑะพัะฐ ั PandaScore API (ะฒ ั.ั. ัะพัะผะฐัะธัะพะฒะฐะฝะธะต ะฒัะตะผะตะฝะธ)
โ   โโโ telegram_messenger.py    # ะะดะธะฝะฐั ะปะพะณะธะบะฐ ะพัะฟัะฐะฒะบะธ ะบะฐััะพัะตะบ ะผะฐััะตะน
โ
โโโ .env                         # ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (tokenั, ะฝะฐัััะพะนะบะธ)
โโโ .gitignore                   # ะัะบะปััะตะฝะธั Git
โโโ docker-compose.yml
โโโ Dockerfile
โโโ Makefile
โโโ deploy.sh                    # ะกะบัะธะฟั ะดะตะฟะปะพั ะฝะฐ ัะตัะฒะตั
โโโ requirements.txt
โโโ supervisord.conf             # ะะฐัััะพะนะบะฐ ะฟัะพัะตััะพะฒ (bot, notifications, match_cacher)
โโโ README.md                    # ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ (ััะพั ัะฐะนะป)
```

---

## ๐ ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ

**CS Upcoming Matches Bot** โ Telegram-ะฑะพั, ะฟัะธััะปะฐััะธะน ัะฒะตะดะพะผะปะตะฝะธั ะพ ะฑะปะธะถะฐะนัะธั, ัะตะบััะธั ะธ ะทะฐะฒะตัััะฝะฝัั ะผะฐััะฐั ะฟะพ Counter-Strike 2 (CS2), ั ะดะฐะฝะฝัะผะธ ะพั [PandaScore API](https://pandascore.co/).

### ๐งน ะะพะทะผะพะถะฝะพััะธ

* `/start` โ ะฟะพะดะฟะธัะบะฐ ะธ ะทะฐะฟััะบ ะฑะพัะฐ
* `/next` โ ะฑะปะธะถะฐะนัะธะต ะผะฐััะธ
* `/live` โ ัะตะบััะธะต live-ะผะฐััะธ (ั ะบะฝะพะฟะบะพะน ััะฐะฝัะปััะธะธ, ะตัะปะธ ะตััั)
* `/recent` โ ะทะฐะฒะตัััะฝะฝัะต ะผะฐััะธ (ั ะฟะพะฑะตะดะธัะตะปะตะผ)
* `/subscribe` โ ะฟะพะดะฟะธัะบะฐ ะฝะฐ ัะธั-1 ัััะฝะธัั
* `/subscribe_all` โ ะฟะพะดะฟะธัะบะฐ ะฝะฐ ะฒัะต ัััะฝะธัั
* `/unsubscribe` โ ะพััะฐะฝะพะฒะธัั ัะฒะตะดะพะผะปะตะฝะธั

### โ๏ธ ะััะธัะตะบัััะฐ

* ะัะต ะผะฐััะธ ะบััะธัััััั ะบะฐะถะดัะต 10 ะผะธะฝัั (`match_cacher.py`)
* ะะพั ัะธัะฐะตั ะดะฐะฝะฝัะต ัะพะปัะบะพ ะธะท `matches.json`
* ะฃะฒะตะดะพะผะปะตะฝะธั ัะฐัััะปะฐัััั ะทะฐ 5 ะผะธะฝัั ะดะพ ะฝะฐัะฐะปะฐ ะผะฐััะฐ
* ะัะฟะพะปัะทัะตััั SQLite ะดะปั ััะฐะฝะตะฝะธั ะฟะพะดะฟะธััะธะบะพะฒ ะธ ะธััะพัะธะธ ัะฒะตะดะพะผะปะตะฝะธะน
* Supervisor ะทะฐะฟััะบะฐะตั ะฑะพัะฐ, ัะฒะตะดะพะผะปะตะฝะธั ะธ ะผะฐัั-ะบััะตั

---

## ๐ ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

### 1. ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

ะกะพะทะดะฐะนัะต `.env` ะฒ ะบะพัะฝะต:

```env
TELEGRAM_BOT_TOKEN=xxx
PANDASCORE_TOKEN=xxx
DEV_MODE=true
USE_MOCK_DATA=false
NOTIFY_INTERVAL_SECONDS=60
```

### 2. ะกะฑะพัะบะฐ ะธ ะทะฐะฟััะบ ัะตัะตะท Docker

```bash
make deploy
```

ะัะฟะพะปะฝะธััั:

* Git pull
* ะะตะทะตัะฒะฝะฐั ะบะพะฟะธั
* ะะตัะตัะฑะพัะบะฐ ะบะพะฝัะตะนะฝะตัะฐ
* ะะตัะตะทะฐะฟััะบ Supervisor ั ะฑะพัะพะผ, ัะฒะตะดะพะผะปะตะฝะธัะผะธ ะธ ะผะฐัั-ะบััะตัะพะผ

---

## ๐งช API (FastAPI) โ ะปะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ

### ะะฐะฟััะบ API ะฒ Docker

```bash
make run-api
```

API ะฑัะดะตั ะดะพัััะฟะตะฝ ะฟะพ ะฐะดัะตัั: `http://localhost:8080/api`.

ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั:

```bash
curl http://localhost:8080/api/health
```

ะะพัััะฟะฝัะต ัะฝะดะฟะพะธะฝัั:

- `GET /api/matches/upcoming?tier=1|all&limit=50`
- `GET /api/matches/live?tier=1|all&limit=50`
- `GET /api/matches/recent?tier=1|all&limit=50`

### ะขะตััั API

```bash
make test-api
```

